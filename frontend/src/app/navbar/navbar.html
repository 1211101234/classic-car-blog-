<!-- Top Navbar -->
<nav class="bg-white border-b border-gray-100 shadow-sm sticky top-0 z-50 backdrop-blur-lg bg-opacity-95">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex items-center justify-between h-16">

      <!-- Left: Logo and Brand -->
      <div class="flex items-center space-x-8">
        <a routerLink="/" class="flex items-center space-x-3 group">
          <div class="w-10 h-10 bg-gradient-to-br from-red-500 to-red-700 rounded-xl flex items-center justify-center shadow-lg group-hover:shadow-xl transition-shadow duration-200">
            <i class="pi pi-car text-white text-xl"></i>
          </div>
          <span class="text-xl font-bold bg-gradient-to-r from-red-600 to-red-800 bg-clip-text text-transparent hidden sm:block">
            Classic Car Blog
          </span>
        </a>

        <!-- Desktop Menu Items -->
        <div class="hidden md:flex items-center space-x-1">
          <ng-container *ngFor="let item of menuItems">
            <a
              *ngIf="item.routerLink"
              [routerLink]="item.routerLink"
              routerLinkActive="!text-red-600 !bg-red-50"
              class="flex items-center space-x-2 px-4 py-2 text-gray-700 hover:text-red-600 hover:bg-red-50 rounded-lg transition-all duration-200 font-medium">
              <i [class]="item.icon"></i>
              <span>{{ item.label }}</span>
            </a>
          </ng-container>
        </div>
      </div>

      <!-- Right: Auth Controls -->
      <div class="flex items-center space-x-4">
        <ng-container *ngIf="authService.isLoggedIn(); else guestLinks">
          <!-- User Profile Section -->
          <div class="hidden md:flex items-center space-x-3 px-4 py-2 bg-gray-50 rounded-xl">
            <div class="w-8 h-8 bg-gradient-to-br from-red-500 to-red-600 rounded-full flex items-center justify-center shadow-md">
              <span class="text-white text-sm font-semibold">
                {{ (authService.getLoggedInUser()?.username || 'U').charAt(0).toUpperCase() }}
              </span>
            </div>
            <div class="flex flex-col">
              <span class="text-sm font-semibold text-gray-800">
                {{ authService.getLoggedInUser()?.username || 'User' }}
              </span>
              <span class="text-xs text-gray-500">Member</span>
            </div>
          </div>

          <!-- Logout Button -->
          <button
            (click)="logout()"
            class="hidden md:inline-flex items-center space-x-2 px-5 py-2.5 bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white font-semibold rounded-xl shadow-md hover:shadow-lg transform hover:-translate-y-0.5 transition-all duration-200">
            <i class="pi pi-sign-out"></i>
            <span>Logout</span>
          </button>
        </ng-container>

        <ng-template #guestLinks>
          <!-- Login Button -->
          <a
            routerLink="/login"
            class="hidden sm:inline-flex items-center space-x-2 px-4 py-2 text-gray-700 hover:text-red-600 font-medium rounded-xl hover:bg-red-50 transition-all duration-200">
            <i class="pi pi-sign-in"></i>
            <span>Login</span>
          </a>

          <!-- Register Button -->
          <a
            routerLink="/register"
            class="inline-flex items-center space-x-2 px-5 py-2.5 bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white font-semibold rounded-xl shadow-md hover:shadow-lg transform hover:-translate-y-0.5 transition-all duration-200">
            <i class="pi pi-user-plus"></i>
            <span>Register</span>
          </a>
        </ng-template>

        <!-- Mobile Menu Button -->
        <button
          class="md:hidden p-2 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors duration-200"
          (click)="toggleMobileMenu()">
          <i [class]="mobileMenuOpen ? 'pi pi-times text-xl' : 'pi pi-bars text-xl'"></i>
        </button>
      </div>
    </div>

    <!-- Mobile Menu Dropdown -->
    <div
      *ngIf="mobileMenuOpen"
      class="md:hidden py-4 border-t border-gray-100 space-y-2 animate-in slide-in-from-top duration-200">

      <!-- Mobile Menu Items -->
      <div class="space-y-1">
        <ng-container *ngFor="let item of menuItems">
          <a
            *ngIf="item.routerLink"
            [routerLink]="item.routerLink"
            (click)="closeMobileMenu()"
            routerLinkActive="bg-red-50 text-red-600"
            class="flex items-center space-x-3 px-4 py-3 text-gray-700 hover:bg-red-50 hover:text-red-600 rounded-lg transition-all duration-200 font-medium">
            <i [class]="item.icon"></i>
            <span>{{ item.label }}</span>
          </a>
        </ng-container>
      </div>

      <!-- Mobile Auth Section -->
      <div class="pt-4 border-t border-gray-100 space-y-2">
        <ng-container *ngIf="authService.isLoggedIn(); else mobileGuestLinks">
          <!-- Mobile User Profile -->
          <div class="flex items-center space-x-3 px-4 py-3 bg-gray-50 rounded-lg">
            <div class="w-10 h-10 bg-gradient-to-br from-red-500 to-red-600 rounded-full flex items-center justify-center shadow-md">
              <span class="text-white font-semibold">
                {{ (authService.getLoggedInUser()?.username || 'U').charAt(0).toUpperCase() }}
              </span>
            </div>
            <div class="flex flex-col">
              <span class="text-sm font-semibold text-gray-800">
                {{ authService.getLoggedInUser()?.username || 'User' }}
              </span>
              <span class="text-xs text-gray-500">Member</span>
            </div>
          </div>

          <!-- Mobile Logout Button -->
          <button
            (click)="logout()"
            class="w-full flex items-center justify-center space-x-2 px-4 py-3 bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white font-semibold rounded-lg shadow-md transition-all duration-200">
            <i class="pi pi-sign-out"></i>
            <span>Logout</span>
          </button>
        </ng-container>

        <ng-template #mobileGuestLinks>
          <!-- Mobile Login -->
          <a
            routerLink="/login"
            (click)="closeMobileMenu()"
            class="flex items-center justify-center space-x-2 px-4 py-3 text-gray-700 border-2 border-gray-200 hover:border-red-500 hover:text-red-600 font-medium rounded-lg transition-all duration-200">
            <i class="pi pi-sign-in"></i>
            <span>Login</span>
          </a>

          <!-- Mobile Register -->
          <a
            routerLink="/register"
            (click)="closeMobileMenu()"
            class="flex items-center justify-center space-x-2 px-4 py-3 bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white font-semibold rounded-lg shadow-md transition-all duration-200">
            <i class="pi pi-user-plus"></i>
            <span>Register</span>
          </a>
        </ng-template>
      </div>
    </div>
  </div>
</nav>
